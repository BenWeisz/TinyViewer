(()=>{"use strict";var t={979:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,a){function o(t){try{c(i.next(t))}catch(t){a(t)}}function r(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,r)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const s=n(549),a=n(425),o=["P3"];class r extends s.Disposable{constructor(t,e){super((()=>{})),this.uri=t,this.documentData=e}static readFile(t){return i(this,void 0,void 0,(function*(){return s.workspace.fs.readFile(t)}))}static create(t){return i(this,void 0,void 0,(function*(){const e=yield r.readFile(t);return new r(t,e)}))}get getDocumentData(){return this.documentData}get imageData(){let t=this.getDocumentData.toString();t=t.split("\r\n").join(" "),t=t.split("\n").join(" "),t=t.split("\t").join(" ");const e=t.split(" ").filter((t=>""!==t)),n=this.uri.fsPath,i=n.split("/"),s=n.split("\\"),a=s.length>1?s[s.length-1]:i[i.length-1];if(o.includes(e[0])){let t,n,i;if("P3"===e[0]){t=parseInt(e[1],10),n=parseInt(e[2],10);const s=parseInt(e[3],10);i=new Uint8Array(e.length-4),e.slice(4,e.length).forEach(((t,e)=>{i[e]=Math.floor(parseInt(t,10)/(s+0)*255)}))}return{status:"Success",width:t,height:n,imageData:i}}return{status:`Failed to load file "${a}". This only supported formats are plain-text: ${o}`}}dispose(){super.dispose()}}class c{constructor(t){this._context=t}static register(t){return s.window.registerCustomEditorProvider(c.viewType,new c(t),{supportsMultipleEditorsPerDocument:!1})}openCustomDocument(t,e,n){return i(this,void 0,void 0,(function*(){return yield r.create(t)}))}resolveCustomEditor(t,e,n){return i(this,void 0,void 0,(function*(){e.webview.options={enableScripts:!0},e.webview.html=a.getHTMLforWebview(e.webview,this._context),e.webview.postMessage(t.imageData)}))}}e.default=c,c.viewType="tinyviewer.ppmpreview"},609:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,a){function o(t){try{c(i.next(t))}catch(t){a(t)}}function r(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,r)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const s=n(549),a=n(425);class o extends s.Disposable{constructor(t,e){super((()=>{})),this.uri=t,this.documentData=e}static readFile(t){return i(this,void 0,void 0,(function*(){return s.workspace.fs.readFile(t)}))}static create(t){return i(this,void 0,void 0,(function*(){const e=yield o.readFile(t);return new o(t,e)}))}get getDocumentData(){return this.documentData}get imageData(){const t=this.getDocumentData,e=this.uri.fsPath,n=e.split("/"),i=e.split("\\"),s=i.length>1?i[i.length-1]:n[n.length-1];if(2===t[2]&&24===t[16]){const e=t[13]<<8||t[12],n=t[15]<<8||t[14],i=new Uint8Array(t.length-18),s=t.slice(18,t.length),a=s.length/3;for(let t=0;t<a;t+=1){const e=3*t;i[e+0]=s[3*a-3-e+0],i[e+1]=s[3*a-3-e+1],i[e+2]=s[3*a-3-e+2]}return{status:"Success",width:e,height:n,imageData:i}}return{status:`Failed to load file "${s}". Please see Paul Bourke's Basic TGA setup for the format`}}dispose(){super.dispose()}}class r{constructor(t){this._context=t}static register(t){return s.window.registerCustomEditorProvider(r.viewType,new r(t),{supportsMultipleEditorsPerDocument:!1})}openCustomDocument(t,e,n){return i(this,void 0,void 0,(function*(){return yield o.create(t)}))}resolveCustomEditor(t,e,n){return i(this,void 0,void 0,(function*(){e.webview.options={enableScripts:!0},e.webview.html=a.getHTMLforWebview(e.webview,this._context),e.webview.postMessage(t.imageData)}))}}e.default=r,r.viewType="tinyviewer.tgapreview"},425:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getHTMLforWebview=void 0,e.getHTMLforWebview=(t,e)=>'\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <title>PPM Preview</title>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <style>\n          #canvas {\n            background-color: whitesmoke;\n            position: fixed;\n            left: 50%;\n            top: 50%;\n            transform: translate(-50%, -50%);\n          }\n        </style>\n      </head>\n      <body>\n        <p id="errorTag"></p>\n        <div id="frame">\n          <canvas id="canvas"></canvas>\n        </div>\n        <script>\n  const DATA_OK = \'Success\';\n\n  window.addEventListener(\'message\', event => {\n    console.log(event.data);\n    const status = event.data.status;\n    if (status !== DATA_OK) {\n      const textNode = document.createTextNode(status);\n      const errorTag = document.getElementById(\'errorTag\');\n      errorTag.appendChild(textNode);\n    }\n    else {\n      const { width, height, imageData } = event.data;\n      const canvas = document.querySelector("#canvas");\n      console.log(event.data);\n      if (imageData && Object.keys(imageData).length === width * height * 3) {\n        canvas.width = width;\n        canvas.height = height;\n        \n        const ctx = canvas.getContext(\'2d\');\n        const image = new ImageData(width, height);\n        const pixels = image.data;\n        \n        for (let y = 0; y < height; y += 1) {\n          for (let x = 0; x < width; x += 1) {\n            const offset = (y * width) + x;\n            pixels[(offset * 4) + 0] = imageData[(offset * 3) + 0];\n            pixels[(offset * 4) + 1] = imageData[(offset * 3) + 1];\n            pixels[(offset * 4) + 2] = imageData[(offset * 3) + 2];\n            pixels[(offset * 4) + 3] = 255; \n          } \n        }\n        \n        ctx.putImageData(image, 0, 0);\n      } else {\n        canvas.remove();\n      }\n    }\n  });\n<\/script>\n      </body>\n    </html>\n  '},549:t=>{t.exports=require("vscode")}},e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}var i={};(()=>{var t=i;Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const e=n(979),s=n(609);t.activate=t=>{t.subscriptions.push(e.default.register(t)),t.subscriptions.push(s.default.register(t))},t.deactivate=()=>{}})(),module.exports=i})();